<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Blog - Kids Cosmos School</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@600&family=Lobster+Two:wght@700&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Heebo', sans-serif;
            background: #f0faff;
        }
        
        .btn-outline-primary {
            border-radius: 50px;
            transition: all 0.3s;
        }
        .btn-outline-primary:hover {
            background-color: #2bb0ed;
            color: white;
            border-color: #2bb0ed;
        }

        /* Blog Grid Styles */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .blog-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .blog-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .blog-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        
        .blog-content {
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .blog-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 14px;
            color: #666;
        }
        
        .blog-category {
            background: #2bb0ed;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .blog-title {
            font-size: 24px;
            font-weight: 700;
            margin: 15px 0;
            color: #5f9ce6;
            line-height: 1.3;
        }
        
        .blog-excerpt {
            color: #666;
            line-height: 1.7;
            margin-bottom: 15px;
            flex: 1;
        }
        
        .blog-author {
            font-size: 14px;
            color: #999;
            font-style: italic;
            margin-bottom: 15px;
        }
        
        .read-more {
            display: inline-block;
            background: #2bb0ed;
            color: white;
            padding: 10px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .read-more:hover {
            background: #5f9ce6;
            color: white;
            transform: translateX(5px);
        }
        
        .loading {
            text-align: center;
            padding: 80px 20px;
            font-size: 20px;
            color: #666;
        }
        
        .loading i {
            font-size: 40px;
            color: #2bb0ed;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-posts {
            text-align: center;
            padding: 80px 20px;
            font-size: 20px;
            color: #999;
        }
        
        .search-box {
            max-width: 500px;
            margin: 30px auto;
        }
        
        .search-box input {
            padding: 12px 20px;
            border-radius: 25px;
            border: 2px solid #2bb0ed;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .blog-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container-fluid bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->

        <!-- Top Bar Start -->
        <div class="container-fluid text-white py-2 px-4 topbar" style="background-color: #2bb0ed;">
            <div class="phone">
                <i class="fa fa-phone-alt me-2"></i> +977-986-0667648
            </div>
            <div class="mail">
                <span><i class="fa fa-envelope me-2"></i> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="384d48595c5041594159014b505d5d544d785f55595154165b5755">[email&#160;protected]</a></span>
            </div>
            <div class="social">
                <a href="https://facebook.com" target="_blank" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                <a href="https://instagram.com" target="_blank" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                <a href="https://youtube.com" target="_blank" class="text-white"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        <!-- Top Bar End -->

        <!-- Navbar Start -->
        <nav class="navbar navbar-expand-lg navbar-light sticky-top px-4 px-lg-5 py-lg-0" style="background-color:#eaf6ff;">
            <a href="index.html" class="navbar-brand d-flex align-items-center">
                <img src="img/logo.png" alt="Kids Cosmos School Logo" style="height:55px; width:auto; margin-right:10px;">
                <h1 class="m-0" style="color:#5f9ce6; font-size:26px;">Kids Cosmos School</h1>
            </a>

            <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav mx-auto">
                    <a href="index.html" class="nav-item nav-link" style="font-weight:500;">Home</a>
                    <a href="about.html" class="nav-item nav-link" style="font-weight:500;">About Us</a>
                    <a href="classes.html" class="nav-item nav-link" style="font-weight:500;">Classes</a>
                    
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" style="font-weight:500;">Activities</a>
                        <div class="dropdown-menu border-0 shadow-sm" style="background-color:#ffffff;">
                            <a href="art-crafts.html" class="dropdown-item" style="padding:10px 20px;">üé® Art & Craft</a>
                            <a href="music.html" class="dropdown-item" style="padding:10px 20px;">üéµ Music & Dance</a>
                            <a href="sports.html" class="dropdown-item" style="padding:10px 20px;">‚öΩ Sports & Games</a>
                            <a href="story.html" class="dropdown-item" style="padding:10px 20px;">üìñ Storytelling</a>
                            <a href="science.html" class="dropdown-item" style="padding:10px 20px;">üî¨ Fun Science</a>
                            <a href="trip.html" class="dropdown-item" style="padding:10px 20px;">üöå Outdoor Trips</a>
                            <a href="parents_day.html" class="dropdown-item" style="padding:10px 20px;">üë®‚Äçüë©‚ÄçüëßParents Day</a>
                            <a href="dramas.html" class="dropdown-item" style="padding:10px 20px;">üé¨Dramas</a>
                        </div>
                    </div>

                    <a href="team.html" class="nav-item nav-link" style="font-weight:500;">Our Team</a>
                    <a href="gallery.html" class="nav-item nav-link" style="font-weight:500;">Gallery</a>
                    <a href="blog.html" class="nav-item nav-link active" style="font-weight:500;">Blog</a>
                    <a href="contact.html" class="nav-item nav-link" style="font-weight:500;">Contact</a>
                </div>

                <a href="admission.html" class="btn rounded-pill px-4 d-none d-lg-block" style="background-color:#2bb0ed; color:white;">
                    Enroll Now <i class="fa fa-child ms-2"></i>
                </a>
            </div>
        </nav>
        <!-- Navbar End -->

        <!-- Page Header Start -->
        <div class="container-fluid page-header py-5 mb-5 position-relative" style="background: linear-gradient(135deg, #2bb0ed, #5f9ce6); z-index:1;">
            <div class="container py-5 text-center text-white">
                <h1 class="display-3 wow animate__animated animate__fadeInDown">Our Blog ‚ú®</h1>
                <p class="lead wow animate__animated animate__fadeInUp" data-wow-delay="0.3s">
                    Tips, stories, and updates to inspire children, parents & teachers
                </p>
            </div>
        </div>
        <!-- Page Header End -->

        <!-- Blog Section Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                    <h1 class="mb-3">Latest Updates & Stories</h1>
                    <p>Stay updated with daily activities, events, and news from Kids Cosmos School</p>
                </div>
                
                <!-- Search Box -->
                <div class="search-box wow fadeInUp" data-wow-delay="0.3s">
                    <input type="text" id="searchInput" placeholder="üîç Search blog posts..." onkeyup="handleSearch()" />
                </div>
                
                <!-- Loading State -->
                <div id="blog-loading" class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Loading blog posts...</p>
                </div>
                
                <!-- Blog Grid -->
                <div id="blog-grid" class="blog-grid wow fadeInUp" data-wow-delay="0.5s" style="display: none;">
                    <!-- Blog cards will be inserted here by JavaScript -->
                </div>
                
                <!-- No Posts Message -->
                <div id="no-posts" class="no-posts" style="display: none;">
                    <i class="fas fa-inbox fa-3x mb-3" style="color: #2bb0ed;"></i>
                    <p>No blog posts available yet. Check back soon!</p>
                </div>
            </div>
        </div>
        <!-- Blog Section End -->

        <!-- Footer Start -->
        <div class="container-fluid text-white footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s" style="background: linear-gradient(135deg, #2bb0ed, #5f9ce6);">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-3 col-md-6">
                        <h3 class="text-white mb-4">Get In Touch</h3>
                        <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>Saraswati nagar marga, Chabahil, Kathmandu, Nepal</p>
                        <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+977 986-0667648</p>
                        <p class="mb-2"><i class="fa fa-envelope me-3"></i><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c9bcb9a8ada1b0a8b0a8f0baa1acaca5bc89aea4a8a0a5e7aaa6a4">[email&#160;protected]</a></p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social me-1" href="#"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social me-1" href="#"><i class="fab fa-instagram"></i></a>
                            <a class="btn btn-outline-light btn-social me-1" href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <h3 class="text-white mb-4">Quick Links</h3>
                        <a class="btn btn-link text-white-50" href="about.html">About Us</a>
                        <a class="btn btn-link text-white-50" href="classes.html">Classes</a>
                        <a class="btn btn-link text-white-50" href="gallery.html">Gallery</a>
                        <a class="btn btn-link text-white-50" href="contact.html">Contact Us</a>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">
                            <a class="text-white text-decoration-none" href="gallery.html">Photo Gallery</a>
                        </h5>
                        <div class="row g-2 pt-2">
                            <div class="col-4"><img class="img-fluid rounded bg-light p-1" src="img/1.jpg" alt="Gallery 1"></div>
                            <div class="col-4"><img class="img-fluid rounded bg-light p-1" src="img/32.jpg" alt="Gallery 2"></div>
                            <div class="col-4"><img class="img-fluid rounded bg-light p-1" src="img/3.jpg" alt="Gallery 3"></div>
                            <div class="col-4"><img class="img-fluid rounded bg-light p-1" src="img/4.jpg" alt="Gallery 4"></div>
                            <div class="col-4"><img class="img-fluid rounded bg-light p-1" src="img/11.jpg" alt="Gallery 5"></div>
                            <div class="col-4"><img class="img-fluid rounded bg-light p-1" src="img/21.jpg" alt="Gallery 6"></div>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-6">
                        <h3 class="text-white mb-4">School Information</h3>
                        <p class="mb-2"><i class="fa fa-clock me-2"></i><strong>Office Hours</strong></p>
                        <p class="mb-3">Sunday ‚Äì Friday<br>9:00 AM ‚Äì 4:00 PM</p>
                        <p class="mb-2"><i class="fa fa-calendar-check me-2"></i><strong>Admissions</strong></p>
                        <p class="mb-3">Admissions open throughout the year.<br>Contact us for enrollment details.</p>
                        <a href="contact.html" class="btn mt-2" style="background:#2bb0ed; color:white;">Contact School</a>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="border-top pt-4" style="border-color: rgba(255,255,255,.3) !important;">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <strong>Kids Cosmos School</strong>. All Rights Reserved.
                        </div>
                        <div class="col-md-6 text-center text-md-end">
                            Designed & Developed by <strong>Aspire Team</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->

        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-lg-square back-to-top" style="background:#2bb0ed; color:white;">
            <i class="bi bi-arrow-up"></i>
        </a>
    </div>

    <!-- JavaScript Libraries -->
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    
    
        <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

        <!-- Blog API -->
        <script src="js/blog-api.js"></script>
   
   <script>
    let allPosts = [];
    
    async function loadBlogPosts() {
        const loading = document.getElementById('blog-loading');
        const grid = document.getElementById('blog-grid');
        const noPosts = document.getElementById('no-posts');
        
        try {
            allPosts = await getBlogPosts();
            
            loading.style.display = 'none';
            
            if (allPosts.length === 0) {
                noPosts.style.display = 'block';
                return;
            }
            
            displayPosts(allPosts);
            
        } catch (error) {
            loading.style.display = 'none';
            noPosts.style.display = 'block';
            noPosts.innerHTML = '<i class="fas fa-exclamation-triangle fa-3x mb-3" style="color: #dc3545;"></i><p>Error loading blog posts. Please try again later.</p>';
            console.error('Error loading blog posts:', error);
        }
    }
    
    function displayPosts(posts) {
        const grid = document.getElementById('blog-grid');
        const noPosts = document.getElementById('no-posts');
        
        if (posts.length === 0) {
            grid.style.display = 'none';
            noPosts.style.display = 'block';
            return;
        }
        
        grid.style.display = 'grid';
        noPosts.style.display = 'none';
        
        grid.innerHTML = posts.map(post => {
            const imageUrl = post.image || 'img/child.avif';
            const excerpt = post.excerpt || truncateText(post.body, 150);
            
            return `
                <div class="blog-card">
                    <img src="${imageUrl}" 
                         alt="${post.title}" 
                         class="blog-image"
                         onerror="this.src='img/child.avif'" />
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span>
                                <i class="far fa-calendar-alt me-2"></i>
                                ${formatDate(post.date)}
                            </span>
                            ${post.category ? `<span class="blog-category">${post.category}</span>` : ''}
                        </div>
                        <h3 class="blog-title">${post.title}</h3>
                        <p class="blog-excerpt">${excerpt}</p>
                        ${post.author ? `<p class="blog-author">By ${post.author}</p>` : ''}
                        <a href="blog_post.html?slug=${post.slug}" class="read-more">
                            Read More <i class="fa fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            `;
        }).join('');
    }
    
    let searchTimeout;
    function handleSearch() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(async () => {
            const keyword = document.getElementById('searchInput').value.trim();
            
            if (keyword === '') {
                displayPosts(allPosts);
                return;
            }
            
            const results = await searchBlogPosts(keyword);
            displayPosts(results);
        }, 500);
    }
    
    document.addEventListener('DOMContentLoaded', loadBlogPosts);
    
    // Netlify Identity
    if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
            if (!user) {
                window.netlifyIdentity.on("login", () => {
                    document.location.href = "/admin/";
                });
            }
        });
    }
</script>
    <!-- WhatsApp Button -->
    <div style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
        <a href="https://wa.me/9779861587703" target="_blank"
           style="background-color: #25D366; color: white; border-radius: 50%; width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; font-size: 28px; text-decoration: none; box-shadow: 0 4px 6px rgba(0,0,0,0.3); transition: transform 0.3s;"
           onmouseover="this.style.transform='scale(1.1)';"
           onmouseout="this.style.transform='scale(1)';">
           <i class="fab fa-whatsapp"></i>
        </a>
    </div>
</body>

</html>